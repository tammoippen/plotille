# UX and Build Issues Review

## Critical Issues Found

You're absolutely right - there are significant problems that need to be fixed before this can be considered complete. Here's a comprehensive review of the actual user-facing issues.

---

## Issue 1: Build Artifacts in Git ðŸ”´ CRITICAL

**Problem:** Generated files are tracked in git, bloating the repository and causing conflicts.

**Affected files in git that shouldn't be:**
- `docs/Lib/site-packages/plotille/*` (entire directory - 13 files)
- `docs/assets/example-outputs/*.txt` (7 files)

**These are generated by `scripts/generate_docs.py` and should be excluded.**

**Fix Required in `.gitignore`:**

Add these lines:

```gitignore
# Documentation build artifacts
docs/Lib/
docs/assets/example-outputs/
```

**Remove from git:**

```bash
git rm -r --cached docs/Lib/
git rm -r --cached docs/assets/example-outputs/
git commit -m "Remove documentation build artifacts from git"
```

**Verify:**
```bash
git status
# Should not show docs/Lib or docs/assets/example-outputs
```

---

## Issue 2: Code Syntax Highlighting Contrast Problems ðŸ”´ CRITICAL

**Problem:** Code in static examples (markdown code blocks) has severe readability issues:
- Comments appear transparent with amber glow (nearly invisible)
- Braces, commas, operators are similarly low contrast
- Regular text doesn't have enough contrast

**Root Cause:** Material theme applies syntax highlighting colors that don't work with amber-on-black. The CSS only sets generic `.highlight pre` color, not specific syntax tokens.

**Fix Required in `docs/stylesheets/terminal.css`:**

Add comprehensive syntax highlighting overrides:

```css
/* Syntax highlighting overrides for better contrast */

/* Base code color - bright for readability */
.highlight .n,  /* names */
.highlight .nb, /* built-in names */
.highlight .nf, /* function names */
.highlight .nc, /* class names */
.highlight .nn, /* module names */
.highlight .nv, /* variables */
.highlight .no, /* constants */
.highlight .bp, /* built-in pseudo */
.highlight pre code {
    color: #ffffff !important;  /* Bright white for main text */
}

/* Keywords - amber bright */
.highlight .k,  /* keyword */
.highlight .kn, /* keyword namespace */
.highlight .kc, /* keyword constant */
.highlight .kd, /* keyword declaration */
.highlight .kp, /* keyword pseudo */
.highlight .kr, /* keyword reserved */
.highlight .kt { /* keyword type */
    color: var(--amber-bright) !important;
    font-weight: 500;
}

/* Strings - lighter amber/yellow */
.highlight .s,  /* string */
.highlight .s1, /* string single quote */
.highlight .s2, /* string double quote */
.highlight .sb, /* string backtick */
.highlight .sc, /* string char */
.highlight .sd, /* string doc */
.highlight .se, /* string escape */
.highlight .sh, /* string heredoc */
.highlight .si, /* string interpol */
.highlight .sx, /* string other */
.highlight .sr, /* string regex */
.highlight .ss { /* string symbol */
    color: #ffd700 !important;  /* Gold */
}

/* Numbers - bright amber */
.highlight .m,  /* number */
.highlight .mf, /* number float */
.highlight .mh, /* number hex */
.highlight .mi, /* number integer */
.highlight .il, /* number integer long */
.highlight .mo, /* number octal */
.highlight .mb { /* number bin */
    color: var(--amber-bright) !important;
}

/* Comments - medium contrast, NOT transparent */
.highlight .c,   /* comment */
.highlight .c1,  /* comment single line */
.highlight .cm,  /* comment multiline */
.highlight .cp,  /* comment preproc */
.highlight .cs { /* comment special */
    color: #998877 !important;  /* Muted tan, not transparent */
    opacity: 1 !important;
    font-style: italic;
}

/* Operators, punctuation - bright white */
.highlight .o,  /* operator */
.highlight .ow, /* operator word */
.highlight .p {  /* punctuation (braces, commas, etc) */
    color: #ffffff !important;
    opacity: 1 !important;
}

/* Decorators - bright amber */
.highlight .nd, /* decorator */
.highlight .ni { /* name builtin pseudo */
    color: var(--amber-bright) !important;
}

/* Function/method calls - bright */
.highlight .nf {
    color: #ffcc00 !important;
}

/* Class names - bright */
.highlight .nc {
    color: var(--amber-bright) !important;
    font-weight: 500;
}

/* Imports - amber */
.highlight .nn {
    color: var(--amber-base) !important;
}

/* Error/warning highlighting */
.highlight .err {
    color: #ff6666 !important;
    background: none !important;
}
```

**Test:** View any advanced example with code blocks - all syntax should be clearly visible.

---

## Issue 3: Header Readability Problems ðŸ”´ CRITICAL

**Problems:**
1. Yellow text on striped amber background (top bar) - unreadable
2. White text on striped amber background - very hard to read
3. Clicking "plotille" logo/text doesn't go home
4. In burger mode (mobile), no home link in sidebar

**Fix Required in `docs/stylesheets/terminal.css`:**

Add header styling:

```css
/* Header fixes for readability */

/* Top header bar - solid black background for contrast */
.md-header {
    background-color: var(--amber-black) !important;
    box-shadow: 0 0 10px var(--amber-glow);
}

/* Header title and links - bright amber on black */
.md-header__title,
.md-header__button {
    color: var(--amber-bright) !important;
}

/* Make header title clickable and obvious it's a link */
.md-header__title {
    cursor: pointer;
}

.md-header__title:hover {
    text-shadow: 0 0 15px var(--amber-glow);
}

/* Header navigation (tabs if present) */
.md-tabs {
    background-color: var(--amber-dark) !important;
}

.md-tabs__link {
    color: var(--amber-base) !important;
}

.md-tabs__link--active,
.md-tabs__link:hover {
    color: var(--amber-bright) !important;
}

/* Search button in header */
.md-search__form {
    background-color: var(--amber-dark) !important;
}

.md-search__input {
    background-color: var(--amber-dark) !important;
    color: var(--amber-base) !important;
}

.md-search__input::placeholder {
    color: var(--amber-dim) !important;
}
```

**Fix for logo not going home:**

Material theme should handle this automatically via the `site_name` in mkdocs.yml. Verify `mkdocs.yml` has:

```yaml
site_name: plotille
```

If that doesn't work, add to `docs/overrides/main.html`:

```html
{% extends "base.html" %}

{% block site_name %}
  <a href="{{ config.site_url | url }}" class="md-header__title">
    {{ config.site_name }}
  </a>
{% endblock %}

{% block scripts %}
  {{ super() }}
  <!-- ... existing scripts ... -->
{% endblock %}
```

**Fix for missing home link in burger mode:**

Material theme shows navigation in mobile mode. The issue is likely that "Home" is not explicitly in the nav. Update `mkdocs.yml`:

```yaml
nav:
  - Home: index.md
  - Cookbook:
      - Basic Plots: cookbook/basic.md
      - Advanced Examples: cookbook/advanced.md
```

**Test:**
- Desktop: Click "plotille" in header â†’ should go to home
- Mobile/narrow window: Open burger menu â†’ "Home" should be visible
- Both: Header should be readable (bright amber on black)

---

## Issue 4: Search Results Styling ðŸŸ¡ IMPORTANT

**Problems:**

### Advanced Results (with content)
- Shows complete text of the page
- Should only show excerpts

**Fix:** Material theme controls this via search plugin config. Update `mkdocs.yml`:

```yaml
plugins:
  - search:
      separator: '[\s\-\.]+'
      lang: en
      # Limit preview length
      indexing: 'full'
```

Unfortunately, Material for MkDocs doesn't have a built-in excerpt feature. The best approach is CSS to limit height:

Add to `docs/stylesheets/terminal.css`:

```css
/* Search results styling */

/* Search results container */
.md-search-result {
    background-color: var(--amber-black) !important;
}

/* Individual search result */
.md-search-result__item {
    background-color: var(--amber-dark) !important;
    border-bottom: 1px solid var(--amber-dim);
}

/* Search result title */
.md-search-result__link {
    color: var(--amber-bright) !important;
}

.md-search-result__link:hover {
    background-color: var(--amber-dark) !important;
    color: var(--amber-bright) !important;
    text-shadow: 0 0 10px var(--amber-glow);
}

/* Search result excerpt/teaser */
.md-search-result__teaser {
    color: var(--amber-base) !important;
    background-color: var(--amber-dark) !important;

    /* Limit height to show only excerpt */
    max-height: 4.5em;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
}

/* Highlighted search terms */
.md-search-result mark {
    background-color: var(--amber-dim) !important;
    color: var(--amber-black) !important;
    font-weight: bold;
}

/* Search result article/page info */
.md-search-result__article {
    background-color: var(--amber-dark) !important;
}

/* Search result metadata */
.md-search-result__meta {
    color: var(--amber-dim) !important;
}
```

### Basic Results (black on black)

**Problem:** Text is black on black background, unreadable.

**Fix:** Already included in CSS above - forces all search elements to use amber colors.

**Test:**
1. Search for "plot"
2. Results should show:
   - Bright amber titles on dark background
   - Amber text excerpts (limited to 3 lines)
   - Readable on hover
   - Formatted properly

---

## Issue 5: Code Editor Text Not Styled ðŸŸ¡ IMPORTANT

**Problem:** Text in textarea code editors is not styled the same as the static code blocks (advanced examples).

**Current state:**
- Textareas have monospace font and amber color
- But no syntax highlighting (expected - they're textareas)
- Should match the overall amber aesthetic

**Note:** Textareas don't support syntax highlighting without a full code editor library. However, we can improve the base styling to match better.

**Fix Required in `docs/stylesheets/terminal.css`:**

Update the `.code-editor` rule:

```css
.code-editor {
    font-family: 'IBM Plex Mono', monospace;
    background: var(--amber-dark);
    color: #ffffff !important;  /* Match styled code - bright white */
    width: 100%;
    min-height: 300px;
    padding: 1rem;
    border: none;
    resize: vertical;
    line-height: 1.5;
    tab-size: 4;

    /* Better text rendering */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Placeholder text if any */
.code-editor::placeholder {
    color: var(--amber-dim);
    opacity: 0.6;
}

/* On focus, add subtle glow */
.code-editor:focus {
    outline: none;
    box-shadow: 0 0 10px var(--amber-glow);
}
```

**Limitation:** Textareas can't have per-token syntax coloring like code blocks. This is expected behavior. The goal is to make the text color match (bright white) so it's consistent when users compare their editable code to the static examples.

**Test:**
- Open a cookbook page
- Text in textarea should be bright white (matching static code)
- Should be clearly readable

---

## Implementation Checklist

### 1. Git Cleanup (5 minutes)
- [ ] Add `docs/Lib/` to .gitignore
- [ ] Add `docs/assets/example-outputs/` to .gitignore
- [ ] Run `git rm -r --cached` on both directories
- [ ] Commit the removal

### 2. CSS Fixes (30 minutes)
- [ ] Add syntax highlighting overrides (Issue 2)
- [ ] Add header styling (Issue 3)
- [ ] Add search results styling (Issue 4)
- [ ] Update code editor styling (Issue 5)

### 3. Header Navigation (15 minutes)
- [ ] Verify mkdocs.yml has proper nav with Home entry
- [ ] Test logo click goes to home
- [ ] Test mobile burger menu shows Home link

### 4. Testing (15 minutes)

#### Desktop
- [ ] Open any advanced example - all code tokens visible and readable
- [ ] Click header "plotille" - goes to home
- [ ] Search for "plot" - results readable, excerpts limited
- [ ] Open basic cookbook - editor text bright and readable

#### Mobile/Narrow Window
- [ ] Open burger menu - "Home" link visible
- [ ] Search works and is readable
- [ ] Code blocks readable

#### All Screen Sizes
- [ ] Headers are bright amber on solid black
- [ ] Comments in code are visible (muted tan, not transparent)
- [ ] Operators and punctuation are white and visible
- [ ] Search results have good contrast
- [ ] No unreadable text anywhere

---

## Summary

**Critical Issues:** 3
1. Build artifacts in git
2. Code syntax highlighting unreadable
3. Header unreadable

**Important Issues:** 2
4. Search results styling
5. Editor text color mismatch

**Total estimated time:** 1-2 hours to fix everything properly

**Priority order:**
1. Git cleanup (prevents repo bloat)
2. Code syntax highlighting (makes docs unusable)
3. Header readability (navigation broken)
4. Search results (discoverability)
5. Editor text color (consistency)

All fixes should be tested in both light and dark ambient lighting conditions to ensure readability in real-world usage.
